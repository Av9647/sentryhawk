{
  "type": "index_parallel",
  "spec": {
    "ioConfig": {
      "type": "index_parallel",
      "inputSource": {
        "type": "s3",
        "prefixes": [
          "s3://cve-production/cve_production_tables/cve_production_yearly_product/data/"
        ],
        "objectGlob": "**/*.parquet"
      },
      "inputFormat": {
        "type": "parquet"
      }
    },
    "tuningConfig": {
      "type": "index_parallel",
      "maxNumConcurrentSubTasks": 16,
      "maxRowsPerSegment": 1000000000,
      "maxRowsInMemory": 1000000,
      "handoffConditionTimeout": 0,
      "logParseExceptions": false,
      "partitionsSpec":{
        "type": "dynamic",
        "maxRowsPerSegment": 1000000000
      }
    },
    "dataSchema": {
      "dataSource": "cve_production_yearly_product",
      "timestampSpec": {
        "column": "year_date",
        "format": "auto"
      },
      "granularitySpec": {
        "type": "uniform",
        "segmentGranularity": "all",
        "queryGranularity": "none",
        "rollup": false
      },
      "dimensionsSpec": {
        "dimensions": [
          { "type": "string", "name": "vendor" },
          { "type": "string", "name": "product" },
          { "type": "long",   "name": "year_published" },
          { "type": "double", "name": "exposure_index" },
          { "type": "double", "name": "network_exposure_index" },
          { "type": "long",   "name": "distinct_cves" },
          { "type": "long",   "name": "distinct_critical_count" },
          { "type": "long",   "name": "distinct_high_count" },
          { "type": "long",   "name": "distinct_medium_count" },
          { "type": "long",   "name": "distinct_low_count" },
          { "type": "long",   "name": "distinct_network_cves" },
          { "type": "long",   "name": "distinct_no_ui_cves" },
          { "type": "long",   "name": "distinct_low_priv_cves" },
          { "type": "long",   "name": "distinct_fully_critical_cves" },
          { "type": "string", "name": "year_date" }
        ]
      },
      "metricsSpec": [
        { "type": "count", "name": "rows" }
      ]
    }
  }
}
